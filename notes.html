
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Notes – Picnic 2026</title>
	<style>
		body {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			margin: 0;
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.notepad-container {
			background: #fff;
			border-radius: 18px;
			box-shadow: 0 10px 40px rgba(102,126,234,0.13);
			padding: 2.5rem 2rem 2rem 2rem;
			max-width: 600px;
			width: 100%;
			margin: 40px auto;
			display: flex;
			flex-direction: column;
			gap: 1.5rem;
		}
		.notepad-title {
			font-size: 2rem;
			font-weight: 800;
			color: #667eea;
			margin-bottom: 0.5rem;
			text-align: center;
		}
		.notepad-area {
			width: 100%;
			min-height: 320px;
			font-size: 1.1rem;
			border-radius: 10px;
			border: 2px solid #e5e7eb;
			padding: 1.2rem 1rem;
			resize: vertical;
			font-family: inherit;
			background: #f9fafb;
			color: #222;
			box-sizing: border-box;
		}
		.notepad-area:focus {
			outline: none;
			border-color: #667eea;
			background: #fff;
		}
		.save-btn {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: #fff;
			border: none;
			border-radius: 10px;
			padding: 0.9rem 2.2rem;
			font-size: 1.1rem;
			font-weight: 700;
			cursor: pointer;
			box-shadow: 0 4px 15px rgba(102, 126, 234, 0.18);
			transition: all 0.2s;
			align-self: center;
		}
		.save-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 24px rgba(102, 126, 234, 0.25);
		}
		@media (max-width: 700px) {
			.notepad-container {
				padding: 1.2rem 0.5rem;
				max-width: 98vw;
			}
			.notepad-title { font-size: 1.3rem; }
			.notepad-area { font-size: 1rem; }
		}
	</style>
</head>
<body>
	<div class="notepad-container">
		<div class="notepad-title">Notes – Picnic 2026</div>
		<textarea id="notesArea" class="notepad-area" placeholder="Write your notes here..."></textarea>
		<button class="save-btn" id="saveBtn">Save</button>
	</div>
	<script type="module">
	import { createClient } from "https://esm.sh/@supabase/supabase-js";

	const supabaseUrl = "https://lpvuhqtpkvbmrkhnknaf.supabase.co";
	const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwdnVocXRwa3ZibXJraG5rbmFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3MDQyMDIsImV4cCI6MjA2OTI4MDIwMn0.fmKlgIAY_Yoi3sFk333lRWlxzNlNNGqRZZAuLzGLnmw";
	const supabase = createClient(supabaseUrl, supabaseKey);

	const notesArea = document.getElementById('notesArea');
	const saveBtn = document.getElementById('saveBtn');

	// Load note from Supabase
	async function loadNote() {
		saveBtn.disabled = true;
		saveBtn.textContent = 'Loading...';
		const { data, error } = await supabase
			.from('notes')
			.select('id, content')
			.eq('title', 'Main Note')
			.limit(1)
			.single();
		if (error && error.code !== 'PGRST116') {
			alert('Failed to load note from database');
			notesArea.value = '';
		} else if (data) {
			notesArea.value = data.content || '';
			notesArea.dataset.noteId = data.id;
		} else {
			notesArea.value = '';
			notesArea.dataset.noteId = '';
		}
		saveBtn.disabled = false;
		saveBtn.textContent = 'Save';
	}

	// Save note to Supabase
	async function saveNote() {
		saveBtn.disabled = true;
		saveBtn.textContent = 'Saving...';
		const noteId = notesArea.dataset.noteId;
		const content = notesArea.value;
		let result;
		if (noteId) {
			// Update existing note
			result = await supabase
				.from('notes')
				.update({ content, updated_at: new Date().toISOString() })
				.eq('id', noteId);
		} else {
			// Insert new note
			result = await supabase
				.from('notes')
				.insert([{ title: 'Main Note', content }]);
		}
		if (result.error) {
			alert('Failed to save note: ' + result.error.message);
		} else {
			saveBtn.textContent = 'Saved!';
			setTimeout(() => saveBtn.textContent = 'Save', 1200);
			// Reload to get the new note id
			await loadNote();
		}
		saveBtn.disabled = false;
	}

	saveBtn.onclick = saveNote;
	window.addEventListener('DOMContentLoaded', loadNote);
	</script>
</body>
</html>
